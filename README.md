# NGワード検索ブロッカー

特定のNGワードを含む検索クエリを送信前にブロックするChrome拡張機能です。個人利用・ローカル環境での使用を想定しており、プライバシーを重視した設計となっています。

## 🚀 主な機能

### ✅ 検索ブロック機能
- Google、Bing、DuckDuckGo、Yahoo! JAPANでの検索をリアルタイムでブロック
- フォーム送信前の検知とURL直接入力の両方に対応
- SPA（シングルページアプリケーション）での検索にも対応

### ✅ NGワード管理
- 自由にNGワードの追加・削除が可能
- 一括登録機能（改行区切りで複数のワードを一度に登録）
- 正規表現モードに対応
- JSON形式でのインポート/エクスポート

### ✅ 一時解除機能
- 5分/10分/30分の一時的なブロック解除
- 指定時間経過後の自動復帰

### ✅ プライバシー保護
- **検索クエリは一切保存されません**
- ブロック回数のみカウント（任意）
- データの外部送信なし

## 📦 インストール方法

### 1. 拡張機能の読み込み
1. Chromeで `chrome://extensions/` を開く
2. 右上の「デベロッパーモード」を有効化
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. `ngword-blocker` フォルダを選択

### 2. 初期設定
1. 拡張機能アイコンを右クリック → 「オプション」
2. 最初のNGワードを登録

## 🎯 使用例

### 基本的な使い方

#### 1. NGワードの登録
**シンプルな単語登録：**
```
ニュース
株価
芸能
```

**複数単語の一括登録：**
```
ニュース
株価情報
テレビ番組
スポーツ結果
政治ニュース
```

#### 2. 検索のブロック
NGワード「ニュース」を登録した場合：

- ❌ ブロックされる検索：
  - `今日のニュース`
  - `ニュース速報`
  - `経済ニュースまとめ`

- ✅ ブロックされない検索：
  - `天気予報`
  - `レシピ 検索`
  - `Python チュートリアル`

### 高度な設定

#### 正規表現モードの活用
正規表現モードを有効にすると、より柔軟なマッチングが可能です：

**⚠️ 重要：正規表現パターンは正規化されず、そのまま使用されます**

```regex
^ニュース.*           # 「ニュース」で始まる検索（先頭一致）
.*(株価|相場).*       # 「株価」または「相場」を含む検索
[0-9]+年.*月.*日      # 日付形式（例：2024年1月1日）
```

**正規化の動作:**
- 検索クエリ: `AIニュース` → `ai ニュース` (正規化される)
- 正規表現: `^ニュース.*` → そのまま (正規化されない)
- 結果: `^ニュース.*` は `ai ニュース` にマッチしない ✅

#### 語境界設定（英語）
英語の単語に対して語境界を適用する場合：

```
news     # 「newsletter」はマッチしない（語境界あり）
stock    # 「stockings」はマッチしない（語境界あり）
```

## 🔧 設定画面の使い方

### NGワード管理タブ

#### 個別削除
登録済みNGワードリストの「削除」ボタンをクリック

#### 一括編集
1. テキストエリアに1行1単語で入力
2. 「リストを更新」ボタンをクリック

#### インポート/エクスポート
**エクスポート：**
- 「JSONエクスポート」ボタンで設定をファイルに保存

**インポート：**
- 「JSONインポート」ボタンで以前の設定を復元

### 拡張機能設定

#### ✅ 正規表現モードを有効にする
- NGワードを正規表現として解釈
- より高度なパターンマッチングが可能

#### ✅ 英語のみ語境界を適用
- 英単語の部分一致を防ぐ
- 正規表現モード時のみ有効

#### ✅ バッジ表示を有効にする
- 拡張機能アイコンに状態を表示
- 一時解除中は非表示

### 一時解除機能

#### 使用場面
- 急いで調べ物をしたい時
- 特定の期間だけブロックを解除したい時

#### 操作方法
1. 5分/10分/30分から選択
2. 「無効化を開始」ボタンをクリック
3. 指定時間経過後、自動的にブロックが再開

## 🛡️ ブロック画面の操作

検索がブロックされると専用ページが表示されます：

### 表示内容
- **クエリ：** 検索内容（一部マスク表示）
- **原因：** マッチしたNGワード
- **検索サイト：** ブロックが発生したサイト名

### 利用可能なアクション
- **NGワード設定を編集：** 設定画面を開く
- **5分間解除：** 5分間だけブロックを解除
- **10分間解除：** 10分間だけブロックを解除  
- **30分間解除：** 30分間だけブロックを解除

## 🌐 対応検索サイト

### 完全対応
- **Google検索** (.com, .co.jp, .co.uk, .de, .fr)
- **Bing検索**
- **DuckDuckGo**
- **Yahoo! JAPAN検索**

### 対応機能
- ✅ 通常の検索フォーム
- ✅ 直接URL入力
- ✅ ページ内での再検索（SPA）
- ✅ キーボードショートカット（Enter）

## 🔒 プライバシーとセキュリティ

### データ保護
- **検索履歴は記録されません**
- NGワードと設定のみローカル保存
- 外部サーバーとの通信なし

### 最小権限
- 必要最小限の権限のみ使用
- 対象検索サイトのみアクセス
- プライベート情報へのアクセスなし

### データの場所
- 設定：`chrome.storage.local`
- 永続化：ブラウザのローカルストレージ
- 削除：拡張機能のアンインストールで完全消去

## 🔧 トラブルシューティング

### よくある問題

#### ブロックが働かない
1. 拡張機能が有効になっているか確認
2. 一時解除状態になっていないか確認
3. NGワードが正しく登録されているか確認

#### 設定が保存されない
1. ブラウザの権限設定を確認
2. ストレージの容量を確認
3. 拡張機能の再インストールを試行

#### 特定のサイトで動作しない
1. 対応サイト一覧を確認
2. サイトのURL形式を確認
3. ブラウザのコンソールでエラーを確認

### デバッグ方法

#### デベロッパーツール
1. `F12` でデベロッパーツールを開く
2. Console タブでエラーメッセージを確認
3. Network タブで通信状況を確認

#### 拡張機能の管理画面
1. `chrome://extensions/` を開く
2. 「詳細」からログを確認
3. 「再読み込み」で拡張機能を再起動

## 📝 JSON設定ファイル形式

バックアップ/インポート用のJSONファイル形式：

```json
{
  "ngWords": [
    "ニュース",
    "株価",
    "芸能"
  ],
  "settings": {
    "useRegex": false,
    "useWordBoundaryEN": false,
    "showBadge": true
  }
}
```

### フィールド説明
- `ngWords`: NGワードの配列
- `settings.useRegex`: 正規表現モードの有効/無効
- `settings.useWordBoundaryEN`: 英語語境界の有効/無効
- `settings.showBadge`: バッジ表示の有効/無効

## 🚫 制限事項

### 技術的制限
- Chrome拡張機能の仕様による制限あり
- 一部のサイト変更で動作に影響する可能性
- JavaScript無効環境では動作不可

### 対応範囲
- 主要検索エンジンのみ対応
- POST送信やGraphQL等の特殊な通信はブロック漏れの可能性
- モバイル版Chromeは未対応

## 📄 ライセンス

このソフトウェアは個人利用・学習目的での使用を想定しています。

## 🤝 サポート

使用方法や不具合についてのご質問は、プロジェクトのIssueページまでお気軽にお寄せください。

---

**⚠️ 注意：** この拡張機能は検索を完全にブロックするものではありません。技術的な回避方法は存在します。自制心をサポートするツールとしてご利用ください。